<?xml version="1.0" encoding="UTF-8"?>
<ContentPage
    x:Class="MauMind.App.Views.SettingsPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    Title="Settings"
    BackgroundColor="{AppThemeBinding Light={StaticResource LightBackground}, Dark={StaticResource DarkBackground}}">

    <ScrollView>
        <StackLayout Padding="20">
            <!-- Header - Premium Left Aligned -->
            <Grid Margin="0,0,0,24">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <Label Grid.Column="0" Text="Settings" Style="{StaticResource PageTitle}" 
                       HorizontalOptions="Start" Margin="0,0,0,0"/>
            </Grid>

            <!-- Appearance -->
            <Frame Style="{StaticResource Card}" Margin="0,0,0,16">
                <StackLayout>
                    <Label Text="Appearance" Style="{StaticResource SectionHeader}" 
                           Margin="0,0,0,16"/>
                    
                    <Grid ColumnDefinitions="*,Auto">
                        <StackLayout VerticalOptions="Center">
                            <Label Text="Dark Mode" Style="{StaticResource BodyText}"/>
                            <Label Text="Switch between themes" Style="{StaticResource CaptionText}"/>
                        </StackLayout>
                        <Switch Grid.Column="1" IsToggled="{Binding IsDarkMode}" 
                                OnColor="{StaticResource Primary}" ThumbColor="White"/>
                    </Grid>
                </StackLayout>
            </Frame>

            <!-- Privacy and Security -->
            <Frame Style="{StaticResource Card}" Margin="0,0,0,16">
                <StackLayout>
                    <Label Text="Privacy and Security" Style="{StaticResource SectionHeader}" 
                           Margin="0,0,0,16"/>
                    
                    <Grid ColumnDefinitions="*,Auto">
                        <StackLayout VerticalOptions="Center">
                            <Label Text="Web Search" Style="{StaticResource BodyText}"/>
                            <Label Text="Search the web when no local results" Style="{StaticResource CaptionText}"/>
                        </StackLayout>
                        <Switch Grid.Column="1" IsToggled="{Binding WebSearchEnabled}" 
                                OnColor="{StaticResource Primary}" ThumbColor="White"/>
                    </Grid>
                </StackLayout>
            </Frame>

            <!-- AI Settings -->
            <Frame Style="{StaticResource Card}" Margin="0,0,0,16">
                <StackLayout>
                    <Label Text="AI Assistant" Style="{StaticResource SectionHeader}" 
                           Margin="0,0,0,16"/>
                    
                    <Label Text="Response Creativity" Style="{StaticResource BodyText}"/>
                    <Slider Minimum="0" Maximum="1" Value="{Binding Temperature}" MinimumTrackColor="{StaticResource Primary}"/>
                    <Label Text="{Binding Temperature, StringFormat='Temperature: {0:F2}'}" Style="{StaticResource CaptionText}"/>
                    
                    <Label Text="Response Length" Style="{StaticResource BodyText}" 
                           Margin="0,16,0,0"/>
                    <Slider Minimum="512" Maximum="2048" Value="{Binding MaxTokens}" MinimumTrackColor="{StaticResource Primary}"/>
                    <Label Text="{Binding MaxTokens, StringFormat='Max {0} tokens'}" Style="{StaticResource CaptionText}"/>
                </StackLayout>
            </Frame>

            <!-- Storage -->
            <Frame Style="{StaticResource Card}" Margin="0,0,0,16">
                <StackLayout>
                    <Label Text="Storage" Style="{StaticResource SectionHeader}" 
                           Margin="0,0,0,16"/>
                    
                    <Label Text="{Binding MemoryUsageMB, StringFormat='Memory: {0} MB'}" Style="{StaticResource BodyText}"/>
                    
                    <Button Text="Open Data Folder" Command="{Binding OpenModelsFolderCommand}" 
                            Style="{StaticResource SecondaryButton}" Margin="0,12,0,0"/>
                </StackLayout>
            </Frame>

            <!-- Data Management -->
            <Frame Style="{StaticResource Card}" Margin="0,0,0,16">
                <StackLayout>
                    <Label Text="Data" Style="{StaticResource SectionHeader}" 
                           Margin="0,0,0,16"/>
                    <Label Text="Export or import your notes and settings" Style="{StaticResource CaptionText}" 
                           Margin="0,0,0,12"/>
                    <Grid ColumnDefinitions="*,*">
                        <Button Grid.Column="0" Text="Export" Command="{Binding ExportDataCommand}" 
                                BackgroundColor="{StaticResource Success}" TextColor="White" CornerRadius="10" Margin="0,0,6,0"/>
                        <Button Grid.Column="1" Text="Import" Command="{Binding ImportDataCommand}" 
                                BackgroundColor="{StaticResource Info}" TextColor="White" CornerRadius="10" Margin="6,0,0,0"/>
                    </Grid>
                </StackLayout>
            </Frame>

            <!-- About - Premium Design -->
            <Frame Style="{StaticResource Card}">
                <StackLayout>
                    <Label Text="About" Style="{StaticResource SectionHeader}" 
                           Margin="0,0,0,16"/>
                    
                    <!-- Brand -->
                    <StackLayout Orientation="Horizontal" Spacing="12">
                        <Frame WidthRequest="48" HeightRequest="48" CornerRadius="24"
                               Background="{StaticResource Primary}" Padding="0">
                            <Label Text="M" FontSize="20" FontAttributes="Bold" TextColor="White"
                                   HorizontalOptions="Center" VerticalOptions="Center"/>
                        </Frame>
                        <StackLayout VerticalOptions="Center">
                            <Label Text="MauMind" FontAttributes="Bold" FontSize="18" TextColor="{StaticResource Primary}"/>
                            <Label Text="Your Private AI Assistant" FontSize="13" 
                                   TextColor="{AppThemeBinding Light={StaticResource LightTextSecondary}, Dark={StaticResource DarkTextSecondary}}"/>
                        </StackLayout>
                    </StackLayout>
                    
                    <Label Text="Version 1.0" FontSize="13" 
                           TextColor="{AppThemeBinding Light={StaticResource LightTextTertiary}, Dark={StaticResource DarkTextTertiary}}" 
                           Margin="0,16,0,0"/>
                    
                    <!-- Privacy Badge - Premium -->
                    <Frame CornerRadius="8" Padding="10,6" BackgroundColor="{StaticResource SuccessLight}" 
                           HorizontalOptions="Start" Margin="0,12,0,0">
                        <StackLayout Orientation="Horizontal" Spacing="6">
                            <Label Text="&#x2713;" FontSize="12" TextColor="{StaticResource SuccessDark}" FontAttributes="Bold"/>
                            <Label Text="All data stays on your device" FontSize="12" TextColor="{StaticResource SuccessDark}"/>
                        </StackLayout>
                    </Frame>
                </StackLayout>
            </Frame>
            
            <!-- Bottom Spacing -->
            <BoxView HeightRequest="40"/>
        </StackLayout>
    </ScrollView>

</ContentPage>
